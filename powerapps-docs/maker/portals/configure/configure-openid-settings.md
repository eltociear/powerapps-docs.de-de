---
title: Konfigurieren der Einstellungen für den OpenID Connect-Anbieter für ein Portal | MicrosoftDocs
description: Anweisungen zum Hinzufügen und Konfigurieren von OpenID Connect-Anbieter Einstellungen für ein Portal.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/18/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 2b4d31165ccd12b2cb5c8c2a4c8ec6f9dd04a7c7
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/04/2019
ms.locfileid: "73542791"
---
# <a name="configure-open-id-connect-provider-settings-for-portals"></a>Konfigurieren der Einstellungen für den Open ID Connect-Anbieter für Portale

Externe [OpenID Connect](https://openid.net/connect/) -Identitäts Anbieter sind Dienste, die den Open ID Connect- [Spezifikationen](https://openid.net/developers/specs/)entsprechen. Die Integration eines Anbieters umfasst das Auffinden der dem Anbieter zugeordneten Autorisierungs-URL (oder Aussteller). Eine Konfigurations-URL kann von der Zertifizierungsstelle bestimmt werden, die Metadaten bereitstellt, die während des Authentifizierungs Workflows erforderlich sind. Die Anbieter Einstellungen basieren auf den Eigenschaften der [openidconnectauthenticationoptions](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.aspx) -Klasse.

Beispiele für Autoritäts-URLs:

- [Google](https://developers.google.com/identity/protocols/OpenIDConnect): <https://accounts.google.com/><https://accounts.google.com/.well-known/openid-configuration>
- [[!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]](https://msdn.microsoft.com/library/azure/mt168838.aspx): [https://login.microsoftonline.com/&lt;[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] AD-Anwendungs&gt;/](https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration)

Jeder OpenID Connect-Anbieter umfasst auch das Registrieren einer Anwendung (ähnlich der eines OAuth 2,0-Anbieters) und das Abrufen einer Client-ID. Die Autoritäts-URL und die generierte Anwendungs Client-ID sind die Einstellungen, die erforderlich sind, um die externe Authentifizierung zwischen dem Portal und dem Identitäts Anbieter zu aktivieren.

> [!Note]
> Der Google OpenID Connect-Endpunkt wird derzeit nicht unterstützt, da die zugrunde liegenden Bibliotheken noch in den frühen Phasen der Veröffentlichung mit Kompatibilitätsproblemen behandelt werden. Stattdessen können die [OAuth2-Anbieter Einstellungen für den Portale](configure-oauth2-settings.md) -Endpunkt verwendet werden.

## <a name="openid-settings-for-includepn-azure-active-directoryincludespn-azure-active-directorymd"></a>OpenID-Einstellungen für [!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]

Melden Sie sich zunächst bei der [[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] Verwaltungsportal](https://msdn.microsoft.com/library/azure/hh967611.aspx#bkmk_azureportal) an, und erstellen oder wählen Sie ein vorhandenes Verzeichnis aus. Wenn ein Verzeichnis verfügbar ist, befolgen Sie die Anweisungen zum [Hinzufügen einer Anwendung](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications) zum Verzeichnis.  

1. Wählen Sie im Menü **Anwendungen** des Verzeichnisses die Option **Hinzufügen**aus.
2. Wählen Sie eine von meinem Unternehmen **entwickelte Anwendung hinzufügen**aus.
3. Geben Sie einen benutzerdefinierten **Namen** für die Anwendung an, und wählen Sie den Typ **Webanwendung und/oder Web-API**aus.
4. Geben Sie für die **Anmelde-URL** und den **App-ID-URI**die URL des Portals für beide Felder an https://portal.contoso.com/
5. An diesem Punkt wird eine neue Anwendung erstellt. Navigieren Sie im Menü zum Abschnitt **Konfigurieren** .

    Aktualisieren Sie im Abschnitt " **Single Sign-on** " den ersten **Antwort-URL** -Eintrag, um einen Pfad in die URL aufzunehmen: https://portal.contoso.com/signin-azure-ad. Dies entspricht dem Wert der **redirecturi** -Website Einstellung.

6. Suchen Sie im Abschnitt **Eigenschaften** nach dem Feld **Client-ID** . Dies entspricht dem Wert der **ClientID-** Website Einstellung.
7. Wählen Sie im footermenü **Endpunkte anzeigen** aus, und notieren Sie sich das Dokument Feld Verbund **Metadaten** .

Der linke Teil der URL ist der **Autoritäts** Wert und befindet sich in einem der folgenden Formate:

- https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/
- https://login.microsoftonline.com/contoso.onmicrosoft.com/

Um die Dienstkonfigurations-URL zu erhalten, ersetzen Sie den Pfad "FederationMetadata/2007-06/FederationMetadata. xml" durch den Pfad ". well-known/OpenID-Configuration". Beispielsweise <https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration>

Dies entspricht dem **MetadataAddress** -Website Einstellungs Wert.

### <a name="related-site-settings"></a>Verwandte Site Einstellungen

Wenden Sie Portal Website Einstellungen an, die auf die oben genannte Anwendung verweisen.

> [!Note]
> Eine Standard-[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] AD-Konfiguration verwendet nur die folgenden Einstellungen (mit Beispiel Werten):                                 
> - Authentifizierung/openidconnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/Authority-<https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/>                                                    
> - Authentication/openidconnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/ClientID-fedcba98-7654-3210-FEDC-ba9876543210                                      
>   Die Client-ID und die Autoritäts-URL enthalten nicht denselben Wert und sollten separat abgerufen werden.           
> - Authentifizierung/openidconnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/redirecturi- https://portal.contoso.com/signin-azure-ad
 
Sie können mehrere Identitäts Anbieter konfigurieren, indem Sie eine Bezeichnung für den \[Anbieter\] Tag ersetzen. Jede eindeutige Bezeichnung bildet eine Gruppe von Einstellungen, die sich auf einen Identitäts Anbieter beziehen. Beispiele: [!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD, myidp


|                          Name der Standort Einstellung                           |                                                                                                                                                                                                         Beschreibung                                                                                                                                                                                                          |
|----------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|           Authentifizierung/Registrierung/externzuweisung aktiviert           |                                                                                                                                                                         Aktiviert oder deaktiviert die Anmeldung und Registrierung externer Konten. Standardwert: true                                                                                                                                                                         |
|         Authentication/openidconnect/\[Provider\]/Authority          |                                               Erforderlich. Die bei der Durchführung von openidconnect-aufrufen zu verwendende Autorität. Beispiel: `https://login.microsoftonline.com/contoso.onmicrosoft.com/`. Weitere Informationen finden Sie unter[openidconnectauthenticationoptions. Authority](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.authority.aspx).                                                |
|      Authentication/openidconnect/\[Provider\]/MetadataAddress       | Der Ermittlungs Endpunkt zum Abrufen von Metadaten. Wird normalerweise mit dem folgenden Pfad beendet:/. well-known/OpenID-Configuration. Beispiel: `https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration`. Weitere Informationen finden Sie unter[openidconnectauthenticationoptions. MetadataAddress](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.metadataaddress.aspx). |
|     Authentication/openidconnect/\[Provider\]/AuthenticationType     |                                   Der owin-Authentifizierungs-Middleware-Typ. Geben Sie den Wert des Ausstellers in den Metadaten der Dienst Konfiguration an. Beispiel: `https://sts.windows.net/contoso.onmicrosoft.com/`. Weitere Informationen finden Sie unter [authenticationoptions. AuthenticationType](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationtype.aspx).                                   |
|          Authentication/openidconnect/\[Provider\]/ClientID          |                                                  Erforderlich. Der Client-ID-Wert aus der Anbieter Anwendung. Sie kann auch als "App-ID" oder "consumerschlüssel" bezeichnet werden. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. ClientID](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientid.aspx).                                                   |
|        Authentication/openidconnect/\[Provider\]/ClientSecret        |                                              Der geheime Client Wert aus der Anbieter Anwendung. Sie kann auch als "App Secret" oder "Consumer Secret" bezeichnet werden. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. clientsecret](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientsecret.aspx).                                              |
|        Authentication/openidconnect/\[Provider\]/RedirectUri         |                                                        Empfohlen. Der passive Endpunkt des AD FS WS-Verbunds. Beispiel: https://portal.contoso.com/signin-saml2. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. redirecturi](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.redirecturi.aspx).                                                        |
|          Authentication/openidconnect/\[Provider\]/Caption           |                                                              Empfohlen. Der Text, den der Benutzer auf einer Anmelde Benutzeroberfläche anzeigen kann. Standard: \[Anbieter\]. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. Caption](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.caption.aspx).                                                               |
|          Authentication/openidconnect/\[Provider\]/Resource          |                                                                                                       Die "Ressource". Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. Resource](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.resource.aspx).                                                                                                        |
|        Authentication/openidconnect/\[Provider\]/ResponseType        |                                                                                                Der ' Response\_Type '. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. Response Type](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.responsetype.aspx).                                                                                                 |
|           Authentication/openidconnect/\[Provider\]/Scope            |                                                                                Eine durch Leerzeichen getrennte Liste der Berechtigungen, die angefordert werden sollen. Standard: OpenID. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. Scope ](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.scope.aspx).                                                                                 |
|        Authentication/openidconnect/\[Provider\]/CallbackPath        |                      Ein optionaler eingeschränkter Pfad für die Verarbeitung des Authentifizierungs Rückrufs. Wenn nicht angegeben und redirecturi verfügbar ist, wird dieser Wert von redirecturi generiert. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. callbackpath](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.callbackpath.aspx).                      |
|     Authentication/openidconnect/\[Provider\]/BackchannelTimeout     |                                                                Der Timeout Wert für die Back-Channel-Kommunikation. Beispiel: 00:05:00 (5 Minuten). Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. backchanneltimeout](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.backchanneltimeout.aspx).                                                                |
| Authentication/openidconnect/\[Provider\]/RefreshOnIssuerKeyNotFound |                                      Bestimmt, ob nach der securitytokensignaturekeynotfoundexception eine Metadatenaktualisierung versucht werden soll. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. erfrischend onissuerkeynotfound](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.refreshonissuerkeynotfound.aspx).                                       |
|      Authentication/openidconnect/\[Provider\]/UseTokenLifetime      |                                               Gibt an, dass die Lebensdauer der Authentifizierungs Sitzung (z. b. Cookies) dem des Authentifizierungs Tokens entsprechen soll. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. usetokenlifetime](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.usetokenlifetime.aspx).                                               |
|     Authentication/openidconnect/\[Provider\]/authenticationMode     |                                                                                                     Der owin-Authentifizierungs-Middleware-Modus. Weitere Informationen finden Sie unter [authenticationoptions. AuthenticationMode](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationmode.aspx).                                                                                                     |
| Authentication/openidconnect/\[Provider\]/SignInAsAuthenticationType |                                                   Der beim Erstellen der System. Security. Claims. ClaimsIdentity verwendete AuthenticationType. Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. signinasauthenticationtype](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.signinasauthenticationtype.aspx).                                                   |
|   Authentication/openidconnect/\[Provider\]/PostLogoutRedirectUri    |                                                                                 Der "Post\_Abmelde\_Redirect\_URI". Weitere Informationen finden Sie unter [openidconnectauthenticationoptions. postlogopdirecturi](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.postlogoutredirecturi.aspx).                                                                                 |
|       Authentication/openidconnect/\[Provider\]/ValidAudiences       |                                                                                                  Durch Trennzeichen getrennte Liste von Zielgruppen-URLs. Weitere Informationen finden Sie unter [tokenvalidationparameters. Zuweisung](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.allowedaudiences.aspx).                                                                                                  |
|        Authentication/openidconnect/\[Provider\]/ValidIssuers        |                                                                                                       Durch Trennzeichen getrennte Liste der Aussteller-URLs. Weitere Informationen finden Sie unter [tokenvalidationparameters. valider](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.validissuers.aspx).                                                                                                       |
|         Authentication/openidconnect/\[Provider\]/ClockSkew          |                                                                                                                                                                                        Die Zeit Schiefe, die beim Überprüfen der Zeiten angewendet werden soll.                                                                                                                                                                                        |
|       Authentication/openidconnect/\[Provider\]/NameClaimType        |                                                                                                                                                                              Der Anspruchstyp, der von der ClaimsIdentity zum Speichern des Namens Anspruchs verwendet wird.                                                                                                                                                                              |
|       Authentication/openidconnect/\[Provider\]/RoleClaimType        |                                                                                                                                                                              Der Anspruchstyp, der von der ClaimsIdentity zum Speichern des Rollen Anspruchs verwendet wird.                                                                                                                                                                              |
|   Authentication/openidconnect/\[Provider\]/RequireExpirationTime    |                                                                                                                                                                              Ein Wert, der angibt, ob Token über einen Wert vom Typ "Ablauf" verfügen müssen.                                                                                                                                                                              |
|    Authentication/openidconnect/\[Provider\]/RequireSignedTokens     |                                                                                                                               Ein Wert, der angibt, ob ein System. IdentityModel. Tokens. SecurityToken xmlns =<https://ddue.schemas.microsoft.com/authoring/2003/5> gültig sein kann, wenn es nicht signiert ist.                                                                                                                                |
|      Authentication/openidconnect/\[Provider\]/SaveSigninToken       |                                                                                                                                                                        Ein boolescher Wert, der steuert, ob das ursprüngliche Token gespeichert wird, wenn eine Sitzung erstellt wird.                                                                                                                                                                        |
|       Authentication/openidconnect/\[Provider\]/ValidateActor        |                                                                                                                                                            Ein Wert, der angibt, ob System. IdentityModel. Tokens. jwtsecuritytoken. Actor überprüft werden soll.                                                                                                                                                            |
|      Authentication/openidconnect/\[Provider\]/ValidateAudience      |                                                                                                                                                                       Ein boolescher Wert, der steuert, ob die Zielgruppe während der tokenüberprüfung überprüft wird.                                                                                                                                                                        |
|       Authentication/openidconnect/\[Provider\]/ValidateIssuer       |                                                                                                                                                                        Ein boolescher Wert, der steuert, ob der Aussteller während der tokenüberprüfung überprüft wird.                                                                                                                                                                         |
|      Authentication/openidconnect/\[Provider\]/ValidateLifetime      |                                                                                                                                                                       Ein boolescher Wert, der steuert, ob die Gültigkeitsdauer während der tokenüberprüfung überprüft wird.                                                                                                                                                                        |
|  Authentication/openidconnect/\[Provider\]/ValidateIssuerSigningKey  |                                                                                                                  Ein boolescher Wert, der steuert, ob die Überprüfung des System. IdentityModel. Tokens. SecurityKey-Elements, das die SecurityToken-xmlns =<https://ddue.schemas.microsoft.com/authoring/2003/5> signiert hat, aufgerufen wird.                                                                                                                  |
|                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                              |

## <a name="enable-authentication-using-a-multi-tenant-azure-active-directory-application"></a>Aktivieren der Authentifizierung mithilfe einer Azure Active Directory Anwendung für mehrere Mandanten

Mithilfe der mehr Instanzen fähigen Anwendung, die in [!include[](../../../includes/pn-azure-active-directory.md)]registriert ist, können Sie das Portal so konfigurieren, dass [!include[](../../../includes/pn-azure-active-directory.md)] Benutzer von einem beliebigen Mandanten in [!include[](../../../includes/pn-azure-shortest.md)] und nicht nur einem bestimmten Mandanten akzeptiert werden. Um die mehr Instanzen Fähigkeit zu aktivieren, legen Sie den Schalter für **mehrere** Mandanten in der [!include[](../../../includes/pn-azure-active-directory.md)]-Anwendung auf " **Ja** " fest.

![Aktivieren der mehr Instanzen Fähigkeit in Azure Active Directory Anwendung](../media/enable-multi-tenancy.png "Aktivieren der mehr Instanzen Fähigkeit in Azure Active Directory Anwendung")

### <a name="related-site-settings"></a>Verwandte Site Einstellungen

Sie können mehrere Identitäts Anbieter konfigurieren, indem Sie eine Bezeichnung für das Tag [Provider] ersetzen. Jede eindeutige Bezeichnung bildet eine Gruppe von Einstellungen, die sich auf einen Identitäts Anbieter beziehen. Sie können die folgenden Site Einstellungen in Portalen erstellen oder konfigurieren, um die Authentifizierung für [!include[](../../../includes/pn-azure-active-directory.md)] mithilfe einer Anwendung mit mehreren Mandanten zu unterstützen:

|Name der Standort Einstellung    |Beschreibung   |
|---|---|
|Authentication/openidconnect/[Provider]/Authority   |Die bei der Durchführung von openidconnect-aufrufen zu verwendende Autorität. Beispiel: `https://login.microsoftonline.com/common`   |
|Authentication/openidconnect/[Provider]/ClientID   |Der Client-ID-Wert aus der Anbieter Anwendung. Sie kann auch als APP-ID oder consumerschlüssel bezeichnet werden.   |
|Authentication/openidconnect/[Provider]/ExternalLogoutEnabled   |Aktiviert oder deaktiviert die externe Konto Abmeldung und-Registrierung. Legen Sie diesen Wert auf "true" fest.   |
|Authentication/openidconnect/[Provider]/IssuerFilter   |Ein Platzhalter basierter Filter, der für alle Aussteller in allen Mandanten übereinstimmt. Verwenden Sie in den meisten Fällen den Wert: `https://sts.windows.net/*/`   |
|Authentication/openidconnect/[Provider]/RedirectUri  |Der Antwort-URL-Speicherort, an den der Anbieter die Authentifizierungs Antwort sendet. Beispiel: `https://portal.contoso.com/signin-oidc` |
|Authentication/openidconnect/[Provider]/ValidateIssuer   |Ein boolescher Wert, der steuert, ob der Aussteller während der tokenüberprüfung überprüft wird. Legen Sie diesen Wert auf "false" fest.   |
|||

### <a name="see-also"></a>Siehe auch
[Konfigurieren der Portal Authentifizierung](configure-portal-authentication.md)  
[Festlegen der Authentifizierungs Identität für ein Portal](set-authentication-identity.md)  
[OAuth2-Anbieter Einstellungen für Portale](configure-oauth2-settings.md)  
[WS-Verbund-Anbieter Einstellungen für Portale](configure-ws-federation-settings.md)  
[SAML 2,0-Anbieter Einstellungen für Portale](configure-saml2-settings.md)  

