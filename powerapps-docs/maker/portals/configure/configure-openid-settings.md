---
title: Konfigurieren der OpenID Connect-Anbietereinstellungen für ein Portal | MicrosoftDoc
description: Anweisungen, OpenID Connect-Providereinstellungen für ein Portal hinzuzufügen und zu konfigurieren.
author: tapanm-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/18/2019
ms.author: tapanm
ms.reviewer: ''
ms.openlocfilehash: b36150e7193975305fb8a478852070628268d4ee
ms.sourcegitcommit: a0d069f63d2ce9496d578f81e65cd32bec2faa4d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/23/2020
ms.locfileid: "2979203"
---
# <a name="configure-open-id-connect-provider-settings-for-portals"></a>Konfigurieren von OpenID Connect-Anbietereinstellungen für Portale

Anbieter von [OpenID Connect](https://openid.net/connect/) Identitäten sind Dienste, die den OpenID Connect [Spezifikationen](https://openid.net/developers/specs/) entsprechen. Die Integration eines Anbieters beinhaltet die Suche nach der URL der Autorität (oder des Austellers), die dem Anbieter zugeordnet ist. Eine Konfigurations-URL kann von der Autorität bestimmt werden, die die Metadaten angibt, die während des Authentifizierungsworkflow erforderlich sind. Die Anbietereinstellungen basieren auf den Eigenschaften der Klasse der [OpenIdConnectAuthenticationOptions](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.aspx).

Beispiele für Autoritäts-URLs sind:

- [Google](https://developers.google.com/identity/protocols/OpenIDConnect): <https://accounts.google.com/><https://accounts.google.com/.well-known/openid-configuration>
- [[!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]](https://msdn.microsoft.com/library/azure/mt168838.aspx): [https://login.microsoftonline.com/&lt;[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] AD-Anwendun&gt;/](https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration)

Jeder OpenID Connect-Anbieter einbezieht auch das Registrieren einer Anwendung (wie bei einem OAuth 2.0-Anbieter) und das Erhalten einer Client-ID. Die Behörden-URL und die erstlte Anwandungs-Client-ID sind die Einstellungen, die nötig sind, um die Authentifizierung zwischen dem Portal und dem Identitätsanbieter zu aktivieren.

> [!Note]
> Der Google OpenID-Endpunkt wird derzeit nicht unterstützt, da sich die zugrunde liegenden Bibliotheken in den Anfangsstadien der Veröffentlichung befinden und Kompatibilitätsprobleme noch nicht augeschlossen sind. Der [OAuth2-Anbietereinstellungen für Portale](configure-oauth2-settings.md)-Endpunkt kann stattdessen verwendet werden.

## <a name="openid-settings-for-pn-azure-active-directory"></a>OpenID-Einstellungen für [!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]

Um sich am [[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] Management Portal](https://msdn.microsoft.com/library/azure/hh967611.aspx#bkmk_azureportal) anzumelden und ein vorhandenes Verzeichnis zu erstellen oder auszuwählen. Wenn kein Verzeichnis verfügbar ist, folgen Sie den Anweisungen zum [Hinzufügen einer Anwendung](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications) zu einem Verzeichnis.  

1. Klicken Sie im Menü **Anwendungen** auf das Verzeichnis, klicken Sie auf die Schaltfläche **Hinzufügen**.
2. Wählen Sie **Hinzufügen einer Anwendung, die meine Organisation entwickelt**.
3. Geben Sie einen benutzerdefinierten **Name** für die Anwendung an und wählen Sie den Typ **Webanwendung und/oder Internet API**.
4. Geben Sie für **Anmelde-URL** und **App-ID-URI** die URL des Portals an https://portal.contoso.com/
5. Zu diesem Zeitpunkt wird eine Neuanmeldung erstellt. Navigieren Sie zum Abschnitt **Konfigurieren** im Menü.

    Unter dem Abschnitt **einmalige Anmeldung** aktualisieren Sie den ersten **Antwort-URL**-Eintrag und tragen einen Pfad in die URL ein: https://portal.contoso.com/signin-azure-ad. Dies entspricht den **RedirectUri**-Werten der Webseiteneinstellung.

6. Suchen Sie im Abschnitt **Eigenschaften** das Feld **Client-ID**. Dies entspricht den **ClientId**-Werten der Webseiteneinstellung.
7. Im Fußzeilenmenü klicken Sie auf **Endpunkte anzeigen** und sehen sich das Feld **Verbundmetadatendokument** an

In der linken Hälfte der URL befindet sich der Wert der **Autorität** in einem der folgenden Formate:

- https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/
- https://login.microsoftonline.com/contoso.onmicrosoft.com/

Um die URL-Dienstkonfiguration abzurufen, ersetzen Sie die FederationMetadata/2007-06/FederationMetadata.xml-Pfadendung durch den Pfad .well-known/openid-configuration. Beispielsweise <https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration>

Dies entspricht dem **MetadataAddress**-Webseiteneinstellungswert.

### <a name="related-site-settings"></a>Zugehörige Websiteeinstellungen

Wenden Sie die Portalwebsite-Einstellungen an, die auf die oben angegebene Anwendung verweisen.

> [!Note]
> Eine standardmäßige [!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] AD-Konfiguratoin nutzt nur die folgenden Einstellungen (Beispielswerte):                                 
> - Authentication/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/Authority - <https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/>                                                    
> - Authentication/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/ClientId - fedcba98-7654-3210-fedc-ba9876543210                                      
>   Die Client-ID und die Autoritäts-URL enthalten nicht denselben Wert und sollten separat abgerufen werden.           
> - Authentication/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/RedirectUri - https://portal.contoso.com/signin-azure-ad
 
Sie können mehrere Identitätsanbieter konfigurieren, indem Sie den Tag \[provider\] durch eine Beschriftung ersetzen. Jede eindeutige Beschriftung steht für eine Gruppe von Einstellungen, die sich auf einen Identitätsanbieter bezieht. Beispiele: [!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD, MyIdP


|                          Website-Einstellungsname                           |                                                                                                                                                                                                         Beschreibung                                                                                                                                                                                                          |
|----------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|           Authentication/Registration/ExternalLoginEnabled           |                                                                                                                                                                         Aktiviert oder deaktiviert die externe Anmeldung und Registrierung. Standard: true                                                                                                                                                                         |
|         Authentication/OpenIdConnect/\[provider\]/Authority          |                                               Erforderlich. Die Autorität, die verwendet wird, wenn Sie OpenIdConnect-Anrufe vornehmen. Beispiel: `https://login.microsoftonline.com/contoso.onmicrosoft.com/`. Weitere Informationen:[OpenIdConnectAuthenticationOptions.Authority](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.authority.aspx).                                                |
|      Authentication/OpenIdConnect/\[provider\]/MetadataAddress       | Der Ermittlungsendpunkt für den Erhalt von Metadaten. Endet standardmäßig mit dem Pfad:/.well-known/openid-configuration . Beispiel: `https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration`. Weitere Informationen:[OpenIdConnectAuthenticationOptions.MetadataAddress](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.metadataaddress.aspx). |
|     Authentication/OpenIdConnect/\[provider\]/AuthenticationType     |                                   Der OWIN-Authentifizierungs-Middleware-Typ. Geben Sie den Wert des Ausstellers in den Metadaten der Dienstkonfiguration an. Beispiel: `https://sts.windows.net/contoso.onmicrosoft.com/`. Weitere Informationen: [AuthenticationOptions.AuthenticationType](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationtype.aspx).                                   |
|          Authentication/OpenIdConnect/\[provider\]/ClientId          |                                                  Erforderlich. Der Client-ID-Wert aus der Anbieter-Anwendung. Sie wird möglicherweise auch als "App-ID" oder als "Consumer-Schlüssel" bezeichnet. Weitere Informationen: [OpenIdConnectAuthenticationOptions.ClientId](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientid.aspx).                                                   |
|        Authentication/OpenIdConnect/\[provider\]/ClientSecret        |                                              Der Client-Secret-Wert aus der Anbieter-Anwendung. Er wird möglicherweise auch als "App-Secret" oder als "Consumer-Secret" bezeichnet. Weitere Informationen: [OpenIdConnectAuthenticationOptions.ClientSecret](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientsecret.aspx).                                              |
|        Authentication/OpenIdConnect/\[provider\]/RedirectUri         |                                                        Empfohlen. Der passive AD FS-WS-Federation-Endpunkt. Beispiel: https://portal.contoso.com/signin-saml2. Weitere Informationen: [OpenIdConnectAuthenticationOptions.RedirectUri](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.redirecturi.aspx).                                                        |
|          Authentication/OpenIdConnect/\[provider\]/Caption           |                                                              Empfohlen. Der Text, den der Benutzer auf der Anmelde-Benutzeroberfläche anzeigen kann. Standard: \[provider\]. Weitere Informationen: [OpenIdConnectAuthenticationOptions.Caption](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.caption.aspx).                                                               |
|          Authentication/OpenIdConnect/\[provider\]/Resource          |                                                                                                       Die 'resource'. Weitere Informationen: [OpenIdConnectAuthenticationOptions.Resource](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.resource.aspx).                                                                                                        |
|        Authentication/OpenIdConnect/\[provider\]/ResponseType        |                                                                                                Der "response\_type". Weitere Informationen: [OpenIdConnectAuthenticationOptions.ResponseType](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.responsetype.aspx).                                                                                                 |
|           Authentication/OpenIdConnect/\[provider\]/Scope            |                                                                                Eine durch Leerzeichen getrennte Liste von Berechtigungen zur Anfrage. Standard: openid. Weitere Informationen: [OpenIdConnectAuthenticationOptions.Scope ](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.scope.aspx).                                                                                 |
|        Authentication/OpenIdConnect/\[provider\]/CallbackPath        |                      Ein optionaler eingeschränkter Pfad für den Authentifizierungs-Callback. Wird dieser nicht bereitgestellt und RedirectUri ist verfügbar, wird der Wert von RedirectUri generiert. Weitere Informationen: [OpenIdConnectAuthenticationOptions.CallbackPath](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.callbackpath.aspx).                      |
|     Authentication/OpenIdConnect/\[provider\]/BackchannelTimeout     |                                                                Timeoutwert für die Back-Channel-Kommunikation. Beispiel: 00:05:00 (5 Min.). Weitere Informationen: [OpenIdConnectAuthenticationOptions.BackchannelTimeout](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.backchanneltimeout.aspx).                                                                |
| Authentication/OpenIdConnect/\[provider\]/RefreshOnIssuerKeyNotFound |                                      Legt fest, ob eine Metadatenaktualisierung nach einem SecurityTokenSignatureKeyNotFoundException versucht wird. Weitere Informationen: [OpenIdConnectAuthenticationOptions.RefreshOnIssuerKeyNotFound](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.refreshonissuerkeynotfound.aspx).                                       |
|      Authentication/OpenIdConnect/\[provider\]/UseTokenLifetime      |                                               Gibt an, dass die Authentifizierungssitzungslebensdauer (z. B. Cookies) mit den dem Authentifizierungstoken übereinstimmen soll. Weitere Informationen: [OpenIdConnectAuthenticationOptions.UseTokenLifetime](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.usetokenlifetime.aspx).                                               |
|     Authentication/OpenIdConnect/\[provider\]/AuthenticationMode     |                                                                                                     Der OWIN-Authentifizierungs-Middleware-Modus. Weitere Informationen: [AuthenticationOptions.AuthenticationMode](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationmode.aspx).                                                                                                     |
| Authentication/OpenIdConnect/\[provider\]/SignInAsAuthenticationType |                                                   Der AuthenticationType, der verwendet wird, wenn die System.Security.Claims.ClaimsIdentity erstellt wird. Weitere Informationen: [OpenIdConnectAuthenticationOptions.SignInAsAuthenticationType](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.signinasauthenticationtype.aspx).                                                   |
|   Authentication/OpenIdConnect/\[provider\]/PostLogoutRedirectUri    |                                                                                 Die "post\_logout\_redirect\_uri". Weitere Informationen: [OpenIdConnectAuthenticationOptions.PostLogoutRedirectUri](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.postlogoutredirecturi.aspx).                                                                                 |
|       Authentication/OpenIdConnect/\[provider\]/ValidAudiences       |                                                                                                  Durch Kommas getrennte Liste der Zielgruppe-URL. Weitere Informationen: [TokenValidationParameters.AllowedAudiences](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.allowedaudiences.aspx).                                                                                                  |
|        Authentication/OpenIdConnect/\[provider\]/ValidIssuers        |                                                                                                       Durch Kommas getrennte Liste der Aussteller-URLs. Weitere Informationen: [TokenValidationParameters.ValidIssuers](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.validissuers.aspx).                                                                                                       |
|         Authentication/OpenIdConnect/\[provider\]/ClockSkew          |                                                                                                                                                                                        Die Abweichungen, wenn Zeiten überprüft werden.                                                                                                                                                                                        |
|       Authentication/OpenIdConnect/\[provider\]/NameClaimType        |                                                                                                                                                                              Der Anspruchstyp, der von ClaimsIdentity verwendet wird, um den Nameanspruch zu speichern.                                                                                                                                                                              |
|       Authentication/OpenIdConnect/\[provider\]/RoleClaimType        |                                                                                                                                                                              Der Anspruchstyp, der von ClaimsIdentity verwendet wird, um den Rollenanspruch zu speichern.                                                                                                                                                                              |
|   Authentication/OpenIdConnect/\[provider\]/RequireExpirationTime    |                                                                                                                                                                              Gibt an, Wert, ob Tokens einen Ablaufwert besitzen müssen.                                                                                                                                                                              |
|    Authentication/OpenIdConnect/\[provider\]/RequireSignedTokens     |                                                                                                                               Ein Wert, der angibt, ob ein System.IdentityModel.Tokens.SecurityToken xmlns=<https://ddue.schemas.microsoft.com/authoring/2003/5> gültig sein kann, wenn es nicht signiert ist.                                                                                                                                |
|      Authentication/OpenIdConnect/\[provider\]/SaveSigninToken       |                                                                                                                                                                        Ein boolescher Wert zum Steuern, ob das ursprüngliche Token gespeichert wird, wenn eine Sitzung erstellt wird.                                                                                                                                                                        |
|       Authentication/OpenIdConnect/\[provider\]/ValidateActor        |                                                                                                                                                            Der Wert, der angibt, ob das System.IdentityModel.Tokens.JwtSecurityToken.Actor validiert sein soll.                                                                                                                                                            |
|      Authentication/OpenIdConnect/\[provider\]/ValidateAudience      |                                                                                                                                                                       Ein boolescher Wert, der steuert, ob die Zielgruppe während der Tokenüberprüfung überprüft wird.                                                                                                                                                                        |
|       Authentication/OpenIdConnect/\[provider\]/ValidateIssuer       |                                                                                                                                                                        Ein boolescher Wert, der steuert, ob der Aussteller während der Tokenüberprüfung überprüft wird.                                                                                                                                                                         |
|      Authentication/OpenIdConnect/\[provider\]/ValidateLifetime      |                                                                                                                                                                       Ein boolescher Wert, der steuert, ob die Lebensdauer während der Tokenüberprüfung überprüft wird.                                                                                                                                                                        |
|  Authentication/OpenIdConnect/\[provider\]/ValidateIssuerSigningKey  |                                                                                                                  Ein boolescher Wert, der steuert, ob die Überprüfung von System.IdentityModel.Tokens.SecurityKey der Signierung des securityToken xmlns=<https://ddue.schemas.microsoft.com/authoring/2003/5> aufgerufen wird.                                                                                                                  |
|                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                              |

## <a name="enable-authentication-using-a-multi-tenant-azure-active-directory-application"></a>Aktivieren Sie die Authentifizierung mithilfe einer mehrinstanzfähigen Azure Active Directory-Anwendung

Sie können das Portal konfigurieren, um [!include[](../../../includes/pn-azure-active-directory.md)] Benutzer von einem anderen Benutzer in [!include[](../../../includes/pn-azure-shortest.md)] zu akzeptieren und nicht nur einen bestimmten Mandanten, indem Sie die Multi-Mandanten-Anwendung verwenden, da in [!include[](../../../includes/pn-azure-active-directory.md)] registriert ist. Um die Mehrinstanzenfähigkeit zu aktivieren, können Sie die **Mehrinstanz** auf **Ja** festlegen in der [!include[](../../../includes/pn-azure-active-directory.md)]-Anwendung.

![Aktivieren der Mehrinstanzenfähigkeit in Azure Active Directory-Anwendung](../media/enable-multi-tenancy.png "Aktivieren der Mehrinstanzenfähigkeit in Azure Active Directory-Anwendung")

### <a name="related-site-settings"></a>Zugehörige Websiteeinstellungen

Sie können mehrere Identitätsanbieter konfigurieren, indem Sie den Tag [provider] durch eine Bezeichnung ersetzen. Jede eindeutige Beschriftung steht für eine Gruppe von Einstellungen, die sich auf einen Identitätsanbieter bezieht. Sie können die folgenden Standortseinstellungen in den Portalen konfigurieren, um die Authentifizierung von [!include[](../../../includes/pn-azure-active-directory.md)] für die Verwendung einer mehrinstanzenfähigen Anwendung zu unterstützen:

|Website-Einstellungsname    |Beschreibung   |
|---|---|
|Authentication/OpenIdConnect/[provider]/Authority   |Die Autorität, die verwendet wird, wenn Sie OpenIdConnect-Anrufe vornehmen. Beispiel: `https://login.microsoftonline.com/common`   |
|Authentication/OpenIdConnect/[provider]/ClientId   |Der Client-ID-Wert aus der Anbieter-Anwendung. Sie wird möglicherweise auch als App-ID oder als Consumer-Schlüssel bezeichnet.   |
|Authentication/OpenIdConnect/[provider]/ExternalLogoutEnabled   |Aktiviert oder deaktiviert die externe Abmeldung und Registrierung. Legen Sie diesen Wert als True fest.   |
|Authentication/OpenIdConnect/[provider]/IssuerFilter   |Ein Platzhalter-basierter Filter, der auf alle Ausstellern über alle Instanzen passt. In den meisten Fällen verwenden Sie den Wert: `https://sts.windows.net/*/`   |
|Authentication/OpenIdConnect/[provider]/RedirectUri  |Der Antwort URL-Speicherort, auf dem die Authentifizierungsantwort gesendet werden. Beispiel: `https://portal.contoso.com/signin-oidc` |
|Authentication/OpenIdConnect/[provider]/ValidateIssuer   |Ein boolescher Wert, der steuert, ob der Aussteller während der Tokenüberprüfung überprüft wird. Legen Sie diesen Wert als False fest.   |
|||

### <a name="see-also"></a>Siehe auch
[Konfigurieren der Portalauthentifizierung](configure-portal-authentication.md)  
[Festlegen der Authentifizierungsidentität für ein Portal](set-authentication-identity.md)  
[OAuth2-Anbietereinstellungen für Portale](configure-oauth2-settings.md)  
[WS-Federation-Anbietereinstellungen für Portale](configure-ws-federation-settings.md)  
[SAML 2.0-Anbietereinstellungen für Portale](configure-saml2-settings.md)  

